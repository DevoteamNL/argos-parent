{
  "layout": {
    "keys": [
      {
        "keyId": "b12d015b7519cdab1b4e2f478787983370f0c535c8e02ff893d716507a0b4eba",
        "publicKey": "MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEZD5KYK/PaOSBkT9GR4Xfi9WxUknzCedqxPuoPOGepLfBbVyiKO3zZF3MdkujeNCjBSMymT4S3s7cOcBtX2kmXQ=="
      },
      {
        "keyId": "f808d5d02e2738467bc818d6c54ee68bcf8d13e78c3b1d4d50d73cbfc87fd447",
        "publicKey": "MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEAT4JQbpgycBCP2ZN/ZVIffX1vYi2VYwC9lwhqVbGxRH3CL4mLckS/XnArlopIqNtm9RB88/K+RkOEXGWkU62iw=="
      },
      {
        "keyId": "6a58de92fc02d7835faba93ee26d91d7e53f03eb8f86e2518632c34596c5ef3f",
        "publicKey": "MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEGC9LY3FrdX5Kb8voAverSlDiBC0KTx+j6T78sf71uPekPcI0hPz3XxGDxxA1JJ70ZAebIT172RLP4b9LBmsABw=="
      }
    ],
    "authorizedKeyIds": [
      "f808d5d02e2738467bc818d6c54ee68bcf8d13e78c3b1d4d50d73cbfc87fd447"
    ],
    "expectedEndProducts": [
      {
        "pattern": "**",
        "destinationType": "PRODUCTS",
        "destinationStepName": "collect_dar",
        "destinationSegmentName": "xldeploy"
      }
    ],
    "layoutSegments": [
      {
        "name": "jenkins",
        "steps": [
          {
            "name": "clean",
            "authorizedKeyIds": [
              "6a58de92fc02d7835faba93ee26d91d7e53f03eb8f86e2518632c34596c5ef3f"
            ],
            "requiredNumberOfLinks": 1,
            "expectedMaterials": [
              {
                "ruleType": "ALLOW",
                "pattern": "**"
              }
            ],
            "expectedProducts": [
              {
                "ruleType": "DISALLOW",
                "pattern": "target/**"
              },
              {
                "ruleType": "ALLOW",
                "pattern": "**"
              }
            ]
          },
          {
            "name": "build",
            "authorizedKeyIds": [
              "6a58de92fc02d7835faba93ee26d91d7e53f03eb8f86e2518632c34596c5ef3f"
            ],
            "requiredNumberOfLinks": 1,
            "expectedMaterials": [
              {
                "ruleType": "MATCH",
                "pattern": "**",
                "destinationType": "PRODUCTS",
                "destinationStepName": "clean"
              }
            ],
            "expectedProducts": [
              {
                "ruleType": "CREATE",
                "pattern": "target/argos-test-app.war"
              },
              {
                "ruleType": "ALLOW",
                "pattern": "**"
              }
            ]
          },
          {
            "name": "deploy",
            "authorizedKeyIds": [
              "6a58de92fc02d7835faba93ee26d91d7e53f03eb8f86e2518632c34596c5ef3f"
            ],
            "requiredNumberOfLinks": 1,
            "expectedMaterials": [
              {
                "ruleType": "MATCH",
                "pattern": "target/argos-test-app.war",
                "destinationType": "PRODUCTS",
                "destinationStepName": "build"
              },
              {
                "ruleType": "ALLOW",
                "pattern": "**"
              }
            ],
            "expectedProducts": [
              {
                "ruleType": "MATCH",
                "pattern": "target/deployit-working-dir/**",
                "destinationType": "PRODUCTS",
                "destinationStepName": "build"
              },
              {
                "ruleType": "MATCH",
                "pattern": "target/*.war",
                "destinationType": "MATERIALS",
                "destinationStepName": "deploy"
              },
              {
                "ruleType": "ALLOW",
                "pattern": "**"
              }
            ]
          }
        ]
      },
      {
        "name": "xldeploy",
        "steps": [
          {
            "name": "collect_dar",
            "authorizedKeyIds": [
              "b12d015b7519cdab1b4e2f478787983370f0c535c8e02ff893d716507a0b4eba"
            ],
            "requiredNumberOfLinks": 1,
            "expectedMaterials": [
              {
                "ruleType": "ALLOW",
                "pattern": "**"
              }
            ],
            "expectedProducts": [
              {
                "ruleType": "ALLOW",
                "pattern": "*"
              },
              {
                "ruleType": "MATCH",
                "pattern": "**",
                "destinationPathPrefix": "target/deployit-working-dir",
                "destinationType": "PRODUCTS",
                "destinationStepName": "build",
                "destinationSegmentName": "jenkins"
              }
            ]
          }
        ]
      }
    ]
  }
}